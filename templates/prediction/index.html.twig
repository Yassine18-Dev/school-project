{% extends 'base.html.twig' %}

{% block title %}Pr√©dictions IA - ArenaMind{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="text-white fw-bold">ü§ñ Pr√©dictions de l'IA</h1>
            <p class="text-muted small">Analysez les performances et anticipez les r√©sultats.</p>
        </div>
        <a href="{{ path('app_prediction_new') }}" class="btn btn-primary rounded-pill px-4 fw-bold">
            <i class="fa-solid fa-plus me-2"></i> Nouvelle Pr√©diction
        </a>
    </div>

    <div class="card border-0 shadow-lg overflow-hidden" style="background-color: var(--bg-card); border-radius: 15px;">
        <div class="table-responsive">
            <table class="table table-dark table-hover align-middle mb-0">
                <thead style="background-color: rgba(136, 51, 255, 0.1);">
                    <tr class="text-uppercase small text-muted">
                        <th class="py-3 ps-4">Tournoi</th>
                        <th class="py-3">Match</th>
                        <th class="py-3">Vainqueur Pr√©dit</th>
                        <th class="py-3">Confiance IA</th>
                        <th class="py-3 text-end pe-4">Actions</th>
                    </tr>
                </thead>
                <tbody>
                {% for prediction in predictions %}
                    <tr>
                        <td class="ps-4 fw-bold">{{ prediction.tournoi.nom }}</td>
                        <td>
                            <span class="text-white">{{ prediction.teamA }}</span>
                            <span class="text-muted mx-2">vs</span>
                            <span class="text-white">{{ prediction.teamB }}</span>
                        </td>
                        <td>
                            <span class="badge rounded-pill bg-opacity-10 text-success" style="background-color: rgba(25, 135, 84, 0.1); border: 1px solid rgba(25, 135, 84, 0.2);">
                                <i class="fa-solid fa-trophy me-1"></i> {{ prediction.predictedWinner }}
                            </span>
                        </td>
                        <td>
                            <div class="d-flex align-items-center gap-2">
                                <div class="progress flex-grow-1" style="height: 6px; background-color: rgba(255,255,255,0.05); width: 100px;">
                                    <div class="progress-bar bg-gradient-success" role="progressbar" style="width: {{ prediction.winProbability * 100 }}%;" aria-valuenow="{{ prediction.winProbability * 100 }}" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <span class="small fw-bold {{ prediction.winProbability > 0.7 ? 'text-success' : (prediction.winProbability > 0.4 ? 'text-warning' : 'text-danger') }}">
                                    {{ (prediction.winProbability * 100)|number_format(0) }}%
                                </span>
                            </div>
                        </td>
                        <td class="text-end pe-4">
                            <div class="btn-group">
                                <a href="{{ path('app_prediction_show', {'id': prediction.id}) }}" class="btn btn-sm btn-icon btn-outline-light border-0" title="Voir">
                                    <i class="fa-solid fa-eye"></i>
                                </a>
                                <a href="{{ path('app_prediction_edit', {'id': prediction.id}) }}" class="btn btn-sm btn-icon btn-outline-light border-0" title="Modifier">
                                    <i class="fa-solid fa-pen"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="5" class="text-center py-5 text-muted">
                            <div class="mb-3 display-4 opacity-50">üîÆ</div>
                            <p>Aucune pr√©diction disponible pour le moment.</p>
                            <a href="{{ path('app_prediction_new') }}" class="btn btn-outline-primary btn-sm rounded-pill mt-2">G√©n√©rer une pr√©diction</a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="mt-3 text-end">
        <small class="text-muted fst-italic">* L'indice de confiance est bas√© sur l'historique des donn√©es.</small>
    </div>
</div>

<style>
    .bg-gradient-success {
        background: linear-gradient(90deg, #198754 0%, #20c997 100%);
    }
</style>
{% endblock %}