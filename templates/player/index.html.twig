{% extends 'layouts/arenamind.html.twig' %}

{% block title %}Players{% endblock %}

{% block body %}
  <div class="am-wrap">
    <div class="am-card">
      <div class="am-card__header">
        <div>
          <h1 class="am-title">Players</h1>
          <p class="am-subtitle">Users avec roleType = PLAYER / CAPTAIN</p>
        </div>

        <form method="get" class="am-search">
          <input class="am-input" type="text" name="q" value="{{ q }}" placeholder="Rechercher email/username..." />
          <button class="am-btn am-btn--primary" type="submit">Search</button>
        </form>
      </div>

      <div class="am-card__body">
        <table class="am-table">
          <thead>
            <tr>
              <th><a class="am-link" href="{{ path('app_player_index', { q: q, sort: 'id', dir: dir == 'asc' ? 'desc' : 'asc' }) }}">ID</a></th>
              <th><a class="am-link" href="{{ path('app_player_index', { q: q, sort: 'username', dir: dir == 'asc' ? 'desc' : 'asc' }) }}">Username</a></th>
              <th><a class="am-link" href="{{ path('app_player_index', { q: q, sort: 'email', dir: dir == 'asc' ? 'desc' : 'asc' }) }}">Email</a></th>
              <th><a class="am-link" href="{{ path('app_player_index', { q: q, sort: 'roleType', dir: dir == 'asc' ? 'desc' : 'asc' }) }}">RoleType</a></th>
              <th>Team</th>
              <th><a class="am-link" href="{{ path('app_player_index', { q: q, sort: 'status', dir: dir == 'asc' ? 'desc' : 'asc' }) }}">Status</a></th>
            </tr>
          </thead>
          <tbody>
            {% for u in players %}
              <tr>
                <td>{{ u.id }}</td>
                <td>{{ u.username }}</td>
                <td>{{ u.email }}</td>
                <td>{{ u.roleType }}</td>
                <td>{{ u.team ? u.team.name : 'â€”' }}</td>
                <td>{{ u.status }}</td>
              </tr>
            {% else %}
              <tr><td colspan="6" class="am-empty">Aucun player/captain.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}
