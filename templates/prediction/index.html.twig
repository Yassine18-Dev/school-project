{% extends 'admin/base_admin.html.twig' %}

{% block title %}ArenaMind - Pr√©dictions IA{% endblock %}

{% block body %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <h1 style="margin: 0;">ü§ñ Pr√©dictions de l'IA</h1>
    <a href="{{ path('app_prediction_new') }}" class="btn-view-front" style="background: var(--purple); text-decoration: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; color: white;">
        + Nouvelle Pr√©diction
    </a>
</div>

<div style="background: var(--card-admin); border-radius: 15px; border: 1px solid var(--border); overflow: hidden;">
    <table class="table" style="width: 100%; color: white; border-collapse: collapse; text-align: left;">
        <thead>
            <tr style="border-bottom: 2px solid var(--purple); background: rgba(168, 85, 247, 0.05);">
                <th style="padding: 20px;">Tournoi</th>
                <th style="padding: 20px;">Vainqueur Pr√©dit</th>
                <th style="padding: 20px;">Confiance IA</th>
                <th style="padding: 20px;">Date de calcul</th>
                <th style="padding: 20px;">Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for prediction in predictions %}
            <tr style="border-bottom: 1px solid rgba(255,255,255,0.05); transition: background 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.02)'" onmouseout="this.style.background='transparent'">
                <td style="padding: 20px; font-weight: 600;">{{ prediction.tournoi.nom }}</td>
                <td style="padding: 20px;">
                    <span style="background: rgba(168, 85, 247, 0.1); color: var(--purple); padding: 5px 12px; border-radius: 20px; font-weight: bold; border: 1px solid rgba(168, 85, 247, 0.2);">
                        {{ prediction.vainqueurPredi }}
                    </span>
                </td>
                <td style="padding: 20px;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        {# Barre de progression dynamique #}
                        <div style="width: 100px; height: 8px; background: #333; border-radius: 10px; overflow: hidden; border: 1px solid rgba(255,255,255,0.05);">
                            <div style="width: {{ prediction.confianceAI * 100 }}%; height: 100%; background: linear-gradient(90deg, #22c55e, #10b981); box-shadow: 0 0 10px rgba(34, 197, 94, 0.3);"></div>
                        </div>
                        <span style="font-family: monospace; font-weight: bold; color: #22c55e;">
                            {{ (prediction.confianceAI * 100)|number_format(0) }}%
                        </span>
                    </div>
                </td>
                <td style="padding: 20px; color: #8b949e; font-size: 0.9rem;">
                    {{ prediction.createdAt ? prediction.createdAt|date('d/m/Y H:i') : '' }}
                </td>
                <td style="padding: 20px;">
                    <div style="display: flex; gap: 15px;">
                        <a href="{{ path('app_prediction_show', {'id': prediction.id}) }}" style="color: #8b949e; text-decoration: none; font-size: 0.9rem;" title="Voir">üëÅÔ∏è</a>
                        <a href="{{ path('app_prediction_edit', {'id': prediction.id}) }}" style="color: #8b949e; text-decoration: none; font-size: 0.9rem;" title="Modifier">‚öôÔ∏è</a>
                    </div>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5" style="padding: 40px; text-align: center; color: #8b949e;">
                    <div style="font-size: 3rem; margin-bottom: 10px;">ü§ñ</div>
                    Aucune pr√©diction n'a √©t√© g√©n√©r√©e par l'IA pour le moment.
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<div style="margin-top: 20px; color: #8b949e; font-size: 0.8rem;">
    * L'indice de confiance est calcul√© sur la base de l'historique des performances des joueurs.
</div>
{% endblock %}