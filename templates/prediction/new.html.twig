{% extends 'admin/base_admin.html.twig' %}

{% block title %}Nouvelle Pr√©diction IA ‚Ä¢ ArenaMind{% endblock %}

{% block body %}
    <div style="margin-bottom: 30px;">
        <a href="{{ path('app_prediction_index') }}" style="color: #8b949e; text-decoration: none; font-size: 0.9rem;">‚Üê Retour √† la liste</a>
        <h1 style="margin-top: 10px;">ü§ñ G√©n√©rer une nouvelle pr√©diction</h1>
    </div>

    <div style="background: var(--card-admin); border: 1px solid var(--border); border-radius: 20px; padding: 30px; max-width: 800px; margin: 0 auto;">
        
        {{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}
            
            <div style="margin-bottom: 25px;">
                {{ form_label(form.tournoi, "S√©lectionner le Tournoi", {'label_attr': {'style': 'display: block; margin-bottom: 8px; color: var(--purple); font-weight: 600;'}}) }}
                {{ form_widget(form.tournoi, {'attr': {'style': 'width: 100%; background: #0b0e14; border: 1px solid var(--border); color: white; padding: 12px; border-radius: 10px;'}}) }}
                <div style="color: #ff4d4d; font-size: 13px; margin-top: 5px;">{{ form_errors(form.tournoi) }}</div>
            </div>

            <div style="margin-bottom: 25px;">
                {{ form_label(form.vainqueurPredi, "Vainqueur sugg√©r√© par l'IA", {'label_attr': {'style': 'display: block; margin-bottom: 8px; color: var(--purple); font-weight: 600;'}}) }}
                {{ form_widget(form.vainqueurPredi, {'attr': {'style': 'width: 100%; background: #0b0e14; border: 1px solid var(--border); color: white; padding: 12px; border-radius: 10px;', 'placeholder': 'Ex: Team Vitality'}}) }}
                <div style="color: #ff4d4d; font-size: 13px; margin-top: 5px;">{{ form_errors(form.vainqueurPredi) }}</div>
            </div>

            <div style="margin-bottom: 35px;">
                {{ form_label(form.confianceAI, "Indice de confiance IA", {'label_attr': {'style': 'display: block; margin-bottom: 8px; color: var(--purple); font-weight: 600;'}}) }}
                <div style="display: flex; align-items: center; gap: 15px;">
                    {{ form_widget(form.confianceAI, {'attr': {'style': 'flex-grow: 1; cursor: pointer;'}}) }}
                    <output style="font-family: monospace; font-weight: bold; color: #22c55e; min-width: 45px; font-size: 1.2rem;">50%</output>
                </div>
                <div style="color: #ff4d4d; font-size: 13px; margin-top: 5px;">{{ form_errors(form.confianceAI) }}</div>
                <small style="color: #8b949e; display: block; margin-top: 10px;">L'indice repr√©sente la probabilit√© math√©matique de victoire selon l'algorithme.</small>
            </div>

            <div style="display: flex; gap: 15px; align-items: center; border-top: 1px solid var(--border); padding-top: 25px;">
                <button type="submit" class="btn" style="background: var(--purple); color: white; border: none; padding: 12px 25px; border-radius: 10px; font-weight: bold; cursor: pointer;">
                    üöÄ Enregistrer la pr√©diction
                </button>
                <a href="{{ path('app_prediction_index') }}" style="color: #8b949e; text-decoration: none;">Annuler</a>
            </div>

        {{ form_end(form) }}
    </div>

    <script>
        // Script pour mettre √† jour l'affichage du pourcentage en temps r√©el
        const range = document.querySelector('input[type="range"]');
        const output = document.querySelector('output');
        if (range && output) {
            range.addEventListener('input', (e) => {
                output.value = Math.round(e.target.value * 100) + '%';
            });
            // Initialisation
            output.value = Math.round(range.value * 100) + '%';
        }
    </script>
{% endblock %}