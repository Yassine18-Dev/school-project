{% extends 'layouts/arenamind.html.twig' %}

{% block title %}Teams{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  {{ include('_ui/am_styles.html.twig') }}
{% endblock %}

{% block body %}
  {% set nextDir = dir == 'asc' ? 'desc' : 'asc' %}

  {% set actions %}
    <a class="am-btn am-btn--primary" href="{{ path('app_team_new') }}">+ New Team</a>
    <a class="am-btn" href="{{ path('app_player_index') }}">Players</a>
  {% endset %}

  {% set body %}
    <form class="am-toolbar" method="get" action="{{ path('app_team_index') }}">
      <input class="am-input" type="text" name="q" placeholder="Search team..." value="{{ q }}">
      <input type="hidden" name="sort" value="{{ sort }}">
      <input type="hidden" name="dir" value="{{ dir }}">
      <button class="am-btn" type="submit">Search</button>
      <a class="am-btn am-btn--ghost" href="{{ path('app_team_index') }}">Reset</a>
    </form>

    <table class="am-table">
      <thead>
        <tr>
          <th>
            <a href="{{ path('app_team_index', { q: q, sort: 'id', dir: sort == 'id' ? nextDir : 'asc' }) }}">#</a>
          </th>
          <th>
            <a href="{{ path('app_team_index', { q: q, sort: 'name', dir: sort == 'name' ? nextDir : 'asc' }) }}">Name</a>
          </th>
          <th style="width: 260px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for team in teams %}
          <tr>
            <td>{{ team.id }}</td>
            <td>{{ team.name }}</td>
            <td class="am-actions">
              <a class="am-btn am-btn--small" href="{{ path('app_team_show', {id: team.id}) }}">View</a>
              <a class="am-btn am-btn--small" href="{{ path('app_team_edit', {id: team.id}) }}">Edit</a>
              <a class="am-btn am-btn--small" href="{{ path('app_team_members', {id: team.id}) }}">Members</a>
            </td>
          </tr>
        {% else %}
          <tr>
            <td colspan="3" class="am-empty">No teams found.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endset %}

  {{ include('_ui/page_card.html.twig', {
    title: 'Teams',
    subtitle: 'Liste des Ã©quipes',
    actions: actions,
    body: body
  }) }}
{% endblock %}
